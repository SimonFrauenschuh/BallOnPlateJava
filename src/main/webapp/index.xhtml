<?xml version="1.0" encoding="UTF-8"?>
<!--
 * Copyright (C) 2021 Simon Frauenschuh - All Rights Reserved
 * You may use and / or modify this code in
 * terms of private use.
 * Any caused damage or misbehaviour of any components are
 * under the responsibility of the user and and the editor
 * cannot be prosecuted for it
-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="/WEB-INF/templates/default.xhtml">
    <ui:define name="content">
        <h1>BallOnPlate</h1>
        <div>
            <p>Diploma Work of Sebastian Haider, Philip Jessner and Simon Frauenschuh</p>
        </div>
		
		<!-- Define Class that is called everytime, the site is reloaded / called -->
		<f:metadata>
    		<f:viewParam name="foo" value="#{bean.foo}" />
    		<f:event type="preRenderView" listener="#{databaseModelController.startup}" />
		</f:metadata>
		
		
        <h:form id="reg" style="width:100%">
        	<h2>Web Control</h2>
            <div>
            	<p>Maybe some extremely helpful information in the future</p>
            </div>
        	<h:panelGrid columns="3" columnClasses="titleCell">
                <h:outputLabel for="xPosition" value="xPosition: " />
                <h:inputText id="xPosition" value="#{newDatabaseModel.positionX}" />
                <h:message for="xPosition" errorClass="invalid" />

                <h:outputLabel for="yPosition" value="yPosition: " />
                <h:inputText id="yPosition" value="#{newDatabaseModel.positionY}" />
                <h:message for="yPosition" errorClass="invalid" />
            </h:panelGrid>

            <p>
                <h:panelGrid columns="1">
                    <h:commandButton id="register"
                        action="#{databaseModelController.register}"
                        value="Register" styleClass="register" />
                    <h:messages styleClass="messages"
                        errorClass="invalid" infoClass="valid"
                        warnClass="warning" globalOnly="true" />
                </h:panelGrid>
            </p>
        </h:form>
        
        <h2>Web View</h2>
        <h:panelGroup rendered="#{empty allEntrys}">
            <em>No registered values</em>
        </h:panelGroup>
        <h:dataTable var="_databaseModel" value="#{allEntrys}"
        	rendered="#{not empty allEntrys}"
	        styleClass="compact">
	        <h:column>
   	     		<f:facet name = "header">ID</f:facet>
    	       	<h:outputText value="#{_databaseModel.id}" />
   	     	</h:column>
   	     	<h:column>
   	     		<f:facet name = "header">Position X</f:facet>
    	       	<h:outputText value="#{_databaseModel.positionX}" />
   	     	</h:column>
   	     	<h:column>
   	     		<f:facet name = "header">Position Y</f:facet>
   	     		<div align="center">
   	     			#{_databaseModel.positionY}
   	     		</div>
   	     	</h:column>
    	</h:dataTable>
    	 
    	<!-- -->
    	<h2>Visualization</h2>
    	
    		
        <ui:param name="posX" value="#{DatabaseModelRepository.getPosX()}" />
        <ui:param name="posY" value="#{DatabaseModelRepository.getPosY()}" />
    	
    	<canvas id="visualization" width="400" height="300" style="border:1px solid #000000;">
    		<script language="JavaScript">	
			
    		var posiX = document.getElementsByName("posX").value;
    		var posiY = document.getElementsByName("posY").value;
    		
    		var c = document.getElementById("visualization");
			var ctx = c.getContext("2d");
			ctx.beginPath();
			ctx.arc(posiX,posiY,15,0,2*Math.PI); 
			ctx.stroke();
						
			</script>
		</canvas>
		<p>
		<h:outputText value="PosX: #{posX} "/>
		<h:outputText value="PosY: #{posY}"/>
		</p>	
    		
    	
    </ui:define>
</ui:composition>
